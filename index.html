<script>
  let bibleData = {};

  // Загружаем Библию из JSON-файла
  fetch('biblie.json')
    .then(response => response.json())
    .then(data => {
      bibleData = data;
      populateBooks(); // Заполняем выпадающий список книг
    });

  // Заполнение списка книг
  function populateBooks() {
    const select = document.getElementById("book");
    bibleData.Books.forEach(book => {
      const option = document.createElement("option");
      option.value = book.Book;
      option.textContent = book.Book;
      select.appendChild(option);
    });
  }

  // Отображение стиха
  function readVerse() {
    const bookName = document.getElementById("book").value;
    const chapterNum = document.getElementById("chapter").value;
    const verseNum = document.getElementById("verse").value;

    const book = bibleData.Books.find(b => b.Book === bookName);
    if (!book) return showError();

    const chapter = book.Chapters.find(c => c.Chapter == chapterNum);
    if (!chapter) return showError();

    const verse = chapter.Verses.find(v => v.Verse == verseNum);
    if (!verse) return showError();

    document.getElementById("bible-output").textContent =
      `${bookName} ${chapterNum}:${verseNum} — ${verse.Text}`;
  }

  // Озвучка
  function speakBible() {
    const text = document.getElementById("bible-output").textContent;
    if (text) {
      const utter = new SpeechSynthesisUtterance(text);
      utter.lang = "ru-RU";
      speechSynthesis.speak(utter);
    }
  }

  // Ошибка, если стих не найден
  function showError() {
    document.getElementById("bible-output").textContent =
      "Стих не найден. Проверьте книгу, главу и стих.";
  }
</script>
